# Kafka Configuration
KAFKA_BROKERS=kafka-broker-1:9092,kafka-broker-2:9092,kafka-broker-3:9092
KAFKA_TOPIC=health-data-raw
KAFKA_GROUP_ID=flink-iceberg-consumer
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_PARTITION_DISCOVERY_INTERVAL_MS=60000

# Schema Registry Configuration
SCHEMA_REGISTRY_URL=http://schema-registry:8081

# Kafka Security (Optional - uncomment if using SASL/SSL)
# KAFKA_SECURITY_PROTOCOL=SASL_SSL
# KAFKA_SASL_MECHANISM=SCRAM-SHA-512
# KAFKA_SASL_USERNAME=flink-consumer
# KAFKA_SASL_PASSWORD=your-password-here

# Iceberg Configuration
ICEBERG_CATALOG_TYPE=rest
ICEBERG_CATALOG_NAME=health_catalog
ICEBERG_CATALOG_URI=http://iceberg-rest:8181
ICEBERG_WAREHOUSE=s3a://data-lake/warehouse
ICEBERG_DATABASE=health_db
ICEBERG_TABLE_RAW=health_data_raw
ICEBERG_TABLE_ERRORS=health_data_errors

# S3/MinIO Configuration
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_PATH_STYLE_ACCESS=true
S3_BUCKET=data-lake

# Flink Configuration
FLINK_PARALLELISM=6
FLINK_CHECKPOINT_INTERVAL_MS=60000
FLINK_CHECKPOINT_TIMEOUT_MS=600000
FLINK_MIN_PAUSE_BETWEEN_CHECKPOINTS_MS=30000
FLINK_MAX_CONCURRENT_CHECKPOINTS=1
FLINK_CHECKPOINT_MODE=EXACTLY_ONCE
FLINK_STATE_BACKEND=rocksdb
FLINK_CHECKPOINT_STORAGE=s3a://flink-checkpoints/health-consumer

# Flink Restart Strategy Configuration
FLINK_RESTART_STRATEGY=fixed-delay
FLINK_RESTART_ATTEMPTS=3
FLINK_RESTART_DELAY_MS=10000

# Flink Failure Rate Restart Strategy (optional, used when FLINK_RESTART_STRATEGY=failure-rate)
FLINK_FAILURE_RATE_MAX_FAILURES=3
FLINK_FAILURE_RATE_INTERVAL_MS=300000
FLINK_FAILURE_RATE_DELAY_MS=10000

# Batch Writing Configuration
BATCH_SIZE=1000
BATCH_TIMEOUT_SECONDS=10
TARGET_FILE_SIZE_MB=256

# Monitoring Configuration
METRICS_ENABLED=true
PROMETHEUS_PORT=9249
LOG_LEVEL=INFO
LOG_FORMAT=json

# Application Configuration
APP_NAME=flink-iceberg-consumer
APP_VERSION=1.0.0
ENVIRONMENT=development
